<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FitnessLady – Belépés</title>
  <style>
    body{font-family:system-ui;background:#0b0b12;color:#fff;display:flex;min-height:100vh;align-items:center;justify-content:center;margin:0}
    .card{width:min(520px,92vw);background:#121225;border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:22px}
    input,button{width:100%;padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:#0e0e1c;color:#fff;margin-top:10px}
    button{background:linear-gradient(90deg,#a855f7,#ec4899);border:none;font-weight:700;cursor:pointer}
    .msg{margin-top:12px;color:#ff6b6b;white-space:pre-wrap}
    .ok{color:#7CFFB2}
  </style>
</head>
<body>
  <div class="card">
    <h2>Belépés</h2>
    <input id="email" placeholder="Email" />
    <input id="pw" type="password" placeholder="Jelszó" />
    <button id="btn">Belépés</button>
    <p style="margin-top:12px"><a href="/hu/register/" style="color:#9ae6ff">Regisztráció</a></p>
    <div id="msg" class="msg"></div>
  </div>

  <script src="/hu/shared/api.js"></script>
  <script>
    const msg = document.getElementById('msg');
    function setMsg(t, ok=false){ msg.textContent=t||''; msg.className = ok?'msg ok':'msg'; }

    document.getElementById('btn').onclick = async () => {
      setMsg('');
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('pw').value;

      const res = await apiCall({ action:'authLogin', email, password });
      if (!res.ok) return setMsg('Hiba: ' + (res.error || 'ismeretlen'));

      localStorage.setItem('fl_session', res.session_token);
      setMsg('Siker! Átirányítás…', true);
      setTimeout(()=> location.href='/hu/app/', 500);
    };
  </script>
</body>
</html>

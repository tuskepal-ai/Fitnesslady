<!-- FILE: /hu/login/index.html -->
<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fitness Lady — Bejelentkezés</title>
  <meta name="description" content="Fitness Lady — bejelentkezés" />
  <meta name="theme-color" content="#120018" />

  <style>
    :root{
      --bg:#07000b;
      --card:rgba(30,8,45,.68);
      --stroke:rgba(255,255,255,.10);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.66);
      --pink:#ff4fd8;
      --pink2:#c64bff;
      --shadow: 0 18px 45px rgba(0,0,0,.55);
      --radius: 22px;
      --max: 1080px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(900px 420px at 20% 15%, rgba(198,75,255,.18), transparent 55%),
        radial-gradient(800px 380px at 80% 25%, rgba(255,79,216,.16), transparent 55%),
        radial-gradient(1000px 480px at 55% 85%, rgba(255,79,216,.10), transparent 60%),
        linear-gradient(180deg, #050008, #040007 55%, #030006);
      overflow-x:hidden;
    }
    .hero-bg{
      position:fixed; inset:0; z-index:-1;
      background-image: url("/hero.png");
      background-size: cover;
      background-position: 78% 20%;
      opacity:.10;
      pointer-events:none;
    }
    header{
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(12px);
      background: rgba(10,0,15,.55);
      border-bottom: 1px solid var(--stroke);
    }
    .topbar{
      max-width: var(--max);
      margin:0 auto;
      padding:14px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:800; letter-spacing:.2px;
      text-decoration:none; color:inherit;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: radial-gradient(circle at 30% 30%, #fff, var(--pink));
      box-shadow: 0 0 18px rgba(255,79,216,.55);
    }
    .pill{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      box-shadow: 0 10px 28px rgba(0,0,0,.25);
      font-size:14px;
      white-space:nowrap;
      cursor:pointer;
      color:inherit;
      text-decoration:none;
      user-select:none;
    }
    .pill:hover{ transform: translateY(-1px); }
    main{
      max-width: var(--max);
      margin: 18px auto 80px;
      padding: 0 14px;
    }
    .card{
      border:1px solid var(--stroke);
      border-radius: 26px;
      background: linear-gradient(180deg, rgba(25,7,40,.75), rgba(20,5,35,.55));
      box-shadow: var(--shadow);
      overflow:hidden;
      max-width: 520px;
      margin: 28px auto 0;
    }
    .cardHeader{ padding:18px 18px 0; }
    h1{ margin:0 0 8px; font-size: 30px; letter-spacing:.2px; }
    .sub{ margin:0 0 12px; color:var(--muted); line-height:1.45; }
    .content{ padding: 14px 18px 18px; }
    label{ display:block; font-size:13px; color:var(--muted); margin:10px 0 6px; }
    .field{
      width:100%;
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      color: var(--text);
      outline:none;
    }
    .field:focus{
      border-color: rgba(255,79,216,.45);
      box-shadow: 0 0 0 4px rgba(255,79,216,.12);
    }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .btn{
      cursor:pointer;
      user-select:none;
      border:1px solid var(--stroke);
      border-radius:999px;
      padding:10px 14px;
      background: rgba(255,255,255,.06);
      color:var(--text);
      font-weight:800;
      transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 18px 38px rgba(0,0,0,.30); border-color: rgba(255,255,255,.18); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(255,79,216,.95), rgba(198,75,255,.95));
      border-color: rgba(255,255,255,.16);
      box-shadow: 0 22px 50px rgba(255,79,216,.18);
      color:#140813;
    }
    .msg{
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      color: rgba(255,255,255,.86);
      font-size: 13px;
      line-height: 1.45;
      display:none;
      white-space: pre-wrap;
    }
    .msg.err{ border-color: rgba(255,91,107,.32); background: rgba(255,91,107,.10); }
    .msg.ok{ border-color: rgba(46,229,157,.28); background: rgba(46,229,157,.10); }
    footer{
      max-width: var(--max);
      margin: 26px auto 30px;
      padding: 0 14px;
      color: rgba(255,255,255,.60);
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="hero-bg" aria-hidden="true"></div>

  <header>
    <div class="topbar">
      <a class="brand" href="/hu/">
        <span class="dot"></span>
        <span>FitnessLady <span style="opacity:.85">Login</span></span>
      </a>
      <a class="pill" href="/hu/">↩ Vissza</a>
    </div>
  </header>

  <main>
    <section class="card">
      <div class="cardHeader">
        <h1>Bejelentkezés</h1>
        <p class="sub">E-mail + jelszó. Belépés után automatikusan a Saját programodba / Adminba visz.</p>
      </div>

      <div class="content">
        <label for="email">E-mail</label>
        <input class="field" id="email" type="email" autocomplete="email" placeholder="pl. te@email.com" />

        <label for="pass">Jelszó</label>
        <input class="field" id="pass" type="password" autocomplete="current-password" placeholder="••••••••" />

        <div style="height:12px"></div>
        <div class="row">
          <button class="btn primary" id="btnLogin" type="button">Belépés</button>
          <button class="btn" id="btnToApp" type="button" title="Ha már beléptél">→ Saját program</button>
          <button class="btn" id="btnToAdmin" type="button" title="Admin">→ Admin</button>
        </div>

        <div class="msg" id="msg"></div>
      </div>
    </section>
  </main>

  <footer>
    <div>© <span id="y"></span> FitnessLady</div>
    <div>Tüske web design</div>
  </footer>

  <script type="module">
    import { auth, onAuth, loginEmailPassword, toApp, toAdmin, escapeHtml } from "../shared/firebase.js";

    const $ = (id)=>document.getElementById(id);
    $("y").textContent = new Date().getFullYear();

    const msg = $("msg");
    function show(text, type="ok"){
      msg.className = `msg ${type}`;
      msg.textContent = text;
      msg.style.display = "block";
    }
    function clearMsg(){ msg.style.display="none"; msg.textContent=""; }

    $("btnLogin").addEventListener("click", async ()=>{
      clearMsg();
      const email = ($("email").value || "").trim();
      const pass  = ($("pass").value || "").trim();
      if(!email || !pass){ show("Add meg az e-mailt és a jelszót.", "err"); return; }

      try{
        await loginEmailPassword(email, pass);
        show("Sikeres belépés ✅", "ok");
      }catch(e){
        show(`Belépés hiba:\n${escapeHtml(e?.message || String(e))}`, "err");
      }
    });

    $("btnToApp").addEventListener("click", ()=> toApp("hu"));
    $("btnToAdmin").addEventListener("click", ()=> toAdmin("hu"));

    // ha már be van lépve, automatikus redirect
    onAuth(async (user)=>{
      if(!user) return;
      // a redirectet a shared/firebase.js intézi (role/email alapján) ha kell,
      // de itt nem erőltetjük, csak hagyjuk a gombokat.
    });
  </script>
</body>
</html>

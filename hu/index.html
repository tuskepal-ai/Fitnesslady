<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fitness Lady</title>

  <style>
    :root{
      --bg:#07060b;
      --card:rgba(255,255,255,.06);
      --card2:rgba(255,255,255,.08);
      --stroke:rgba(255,255,255,.10);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.70);
      --muted2:rgba(255,255,255,.55);
      --pink:#ff43d6;
      --pink2:#b53cff;
      --shadow: 0 20px 60px rgba(0,0,0,.55);
      --radius:22px;
      --radius2:28px;
      --max:1120px;
      --gap:18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background: radial-gradient(1200px 700px at 15% 5%, rgba(255,67,214,.20), transparent 55%),
                  radial-gradient(900px 600px at 80% 10%, rgba(181,60,255,.18), transparent 60%),
                  var(--bg);
      overflow-x:hidden;
    }

    a{color:inherit; text-decoration:none}
    .container{max-width:var(--max); margin:0 auto; padding:0 18px}
    .nav{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(8,7,12,.72), rgba(8,7,12,.35));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .nav-inner{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 0;
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.2px}
    .dot{
      width:10px; height:10px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #ffd1ff, var(--pink));
      box-shadow: 0 0 22px rgba(255,67,214,.55);
    }
    .menu{display:flex; align-items:center; gap:14px; color:var(--muted)}
    .menu a{padding:10px 10px; border-radius:14px}
    .menu a:hover{background:rgba(255,255,255,.06); color:var(--text)}
    .cta{
      display:inline-flex; align-items:center; gap:10px;
      padding:12px 16px;
      border-radius:999px;
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      box-shadow: 0 12px 30px rgba(255,67,214,.20);
      font-weight:700;
      white-space:nowrap;
    }

    /* HERO */
    .hero{
      position:relative;
      padding:54px 0 18px;
    }
    .hero-card{
      position:relative;
      overflow:hidden;
      border-radius:var(--radius2);
      border:1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow);
      background: rgba(255,255,255,.03);
      min-height: 420px;
    }
    .hero-bg{
      position:absolute; inset:0;
      background:
        radial-gradient(900px 520px at 20% 15%, rgba(255,67,214,.35), transparent 58%),
        radial-gradient(760px 520px at 80% 20%, rgba(181,60,255,.28), transparent 60%),
        linear-gradient(to bottom, rgba(0,0,0,.0), rgba(0,0,0,.55)),
        url("hero.png");
      background-size: cover;
      background-position:center;
      filter:saturate(1.05) contrast(1.04);
      transform: scale(1.02);
    }
    .hero-overlay{
      position:absolute; inset:0;
      background:
        radial-gradient(900px 520px at 10% 10%, rgba(0,0,0,.15), transparent 60%),
        linear-gradient(to bottom, rgba(0,0,0,.05), rgba(0,0,0,.60));
    }
    .hero-content{
      position:relative;
      padding:34px 26px 26px;
      display:flex; flex-direction:column; gap:16px;
    }
    .h1{
      margin:0;
      font-size: clamp(32px, 5vw, 56px);
      line-height:1.02;
      letter-spacing:-.7px;
      text-shadow: 0 18px 45px rgba(0,0,0,.55);
    }
    .lead{
      max-width: 720px;
      margin:0;
      color:var(--muted);
      font-size: 16px;
      line-height:1.5;
    }
    .hero-actions{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-top:4px;
    }
    .pill{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px;
      border-radius:999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      color:var(--text);
      font-weight:650;
    }
    .pill:hover{background:rgba(255,255,255,.11)}
    .subpills{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-top:6px;
      color:var(--muted2);
      font-size:13px;
    }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.08);
    }

    /* SECTIONS */
    section{padding:30px 0}
    .section-title{
      font-size: clamp(26px, 3.6vw, 40px);
      letter-spacing:-.4px;
      margin:0 0 12px;
    }
    .section-lead{margin:0 0 18px; color:var(--muted); line-height:1.5}
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: var(--gap);
    }
    .card{
      border-radius:var(--radius);
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.05);
      box-shadow: 0 18px 50px rgba(0,0,0,.40);
      overflow:hidden;
    }
    .card-pad{padding:18px}
    .muted{color:var(--muted)}
    .kicker{
      font-size:12px; letter-spacing:.16em; text-transform:uppercase;
      color: rgba(255,255,255,.62);
    }

    /* Reviews */
    .reviews-wrap{grid-column: 1 / -1}
    .reviews-head{
      display:flex; align-items:flex-start; justify-content:space-between;
      gap:12px; flex-wrap:wrap;
    }
    .reviews-actions{display:flex; gap:10px; flex-wrap:wrap}
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px;
      border-radius:999px;
      padding:12px 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.07);
      color:var(--text);
      font-weight:750;
      cursor:pointer;
    }
    .btn:hover{background: rgba(255,255,255,.10)}
    .btn-primary{
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      border:none;
      box-shadow: 0 14px 35px rgba(255,67,214,.18);
    }
    .btn-primary:hover{filter:brightness(1.04)}
    .reviews-list{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 14px;
      margin-top: 16px;
    }
    .review{
      grid-column: span 6;
      border-radius: 20px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.18);
      padding:16px;
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
    }
    .review-top{display:flex; align-items:flex-start; justify-content:space-between; gap:10px}
    .review-name{font-weight:800}
    .stars{letter-spacing:1px; white-space:nowrap}
    .review-text{margin:10px 0 0; color: rgba(255,255,255,.80); line-height:1.55}
    .review-meta{margin-top:12px; font-size:12px; color: rgba(255,255,255,.55)}
    .reviews-empty{
      margin-top:14px;
      padding:14px 16px;
      border-radius:16px;
      border:1px dashed rgba(255,255,255,.18);
      color: rgba(255,255,255,.70);
      background: rgba(255,255,255,.04);
    }

    footer{padding:34px 0 44px; color:rgba(255,255,255,.55)}
    .sep{height:1px; background:rgba(255,255,255,.08); margin:16px 0}

    @media (max-width: 860px){
      .menu{display:none}
      .review{grid-column: span 12;}
      .hero-card{min-height: 460px;}
    }
  </style>
</head>

<body>
  <!-- NAV -->
  <div class="nav">
    <div class="container">
      <div class="nav-inner">
        <div class="brand">
          <span class="dot"></span>
          <span>Fitness Lady</span>
        </div>

        <div class="menu">
          <a href="#csomagok">Csomagok</a>
          <a href="#hogyan">Hogyan m≈±k√∂dik?</a>
          <a href="#velemenyek">V√©lem√©nyek</a>
          <a href="#kapcsolat">Kapcsolat</a>
        </div>

        <a class="cta" href="#kapcsolat">Ingyenes konzult√°ci√≥</a>
      </div>
    </div>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="container">
      <div class="hero-card">
        <div class="hero-bg"></div>
        <div class="hero-overlay"></div>

        <div class="hero-content">
          <h1 class="h1">N≈ëi edz√©sterv, amit t√©nyleg lehet tartani.</h1>
          <p class="lead">Nem sablon. Nem kompromisszum. N≈ëi edz√©sterv form√°hoz, er≈ëh√∂z, jobb k√∂z√©rzethez ‚Äî neked, az id≈ëbeoszt√°sodhoz igaz√≠tva.</p>

          <div class="hero-actions">
            <a class="pill" href="#kapcsolat">Ingyenes konzult√°ci√≥</a>
            <a class="pill" href="#csomagok">Csomagok</a>
            <a class="pill" href="#velemenyek">V√©lem√©nyek</a>
          </div>

          <div class="subpills">
            <span class="chip">üìç V√°ros / Terem neve</span>
            <span class="chip">‚è±Ô∏è Id≈ëtartamok</span>
            <span class="chip">üí¨ WhatsApp/Instagram: @fitnesslady</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- CSOMAGOK (placeholder) -->
  <section id="csomagok">
    <div class="container">
      <h2 class="section-title">Csomagok</h2>
      <p class="section-lead">V√°lassz a c√©lod √©s id≈ëbeoszt√°sod alapj√°n. Pr√©mium √©rzet, tiszta strukt√∫ra, stabil rendszer.</p>

      <div class="grid">
        <div class="card card-pad" style="grid-column: span 4;">
          <div class="kicker">Start</div>
          <div class="sep"></div>
          <div class="muted">Bel√©p≈ë csomag, letisztult alapok.</div>
        </div>
        <div class="card card-pad" style="grid-column: span 4;">
          <div class="kicker">Balance</div>
          <div class="sep"></div>
          <div class="muted">Form√°l√≥d√°s + er≈ë, folyamatos visszajelz√©ssel.</div>
        </div>
        <div class="card card-pad" style="grid-column: span 4;">
          <div class="kicker">Pro</div>
          <div class="sep"></div>
          <div class="muted">Maxim√°lis t√°mogat√°s, teljes szem√©lyre szab√°s.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- HOGYAN (placeholder) -->
  <section id="hogyan">
    <div class="container">
      <h2 class="section-title">Hogyan m≈±k√∂dik?</h2>
      <p class="section-lead">R√∂viden: konzult√°ci√≥ ‚Üí terv ‚Üí k√∂vet√©s ‚Üí finomhangol√°s. (Ezt k√©s≈ëbb kib≈ëv√≠tj√ºk.)</p>
    </div>
  </section>

  <!-- V√âLEM√âNYEK -->
  <section id="velemenyek">
    <div class="container">
      <div class="card reviews-wrap">
        <div class="card-pad">
          <div class="reviews-head">
            <div>
              <h2 class="section-title" style="margin:0 0 8px;">V√©lem√©nyek</h2>
              <p class="section-lead" style="margin:0;">
                V√©lem√©nyt √≠rni itt tudsz (Tally). A j√≥v√°hagyott (‚Äûigen‚Äù) v√©lem√©nyek automatikusan megjelennek.
              </p>
            </div>
            <div class="reviews-actions">
              <a class="btn btn-primary" href="https://tally.so/r/LZpRXG" target="_blank" rel="noopener">√çrj v√©lem√©nyt</a>
              <button class="btn" id="refreshBtn" type="button">Friss√≠t√©s</button>
            </div>
          </div>

          <div id="reviewsSummary" class="reviews-empty" style="display:none;"></div>

          <div id="reviewsList" class="reviews-list"></div>

          <div id="reviewsEmpty" class="reviews-empty">
            Bet√∂lt√©s‚Ä¶
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- KAPCSOLAT (placeholder) -->
  <section id="kapcsolat">
    <div class="container">
      <h2 class="section-title">Kapcsolat</h2>
      <p class="section-lead">Ide j√∂het a kapcsolat form / id≈ëpontfoglal√°s / WhatsApp gomb.</p>
    </div>
  </section>

  <footer>
    <div class="container">
      <div class="sep"></div>
      ¬© <span id="y"></span> Fitness Lady
    </div>
  </footer>

<script>
  document.getElementById("y").textContent = new Date().getFullYear();

  // 1) IDE illeszd be a "Publish to web" CSV linkedet (amit mutatt√°l a k√©pen)
  //    P√©lda forma:
  //    https://docs.google.com/spreadsheets/d/e/2PACX-.../pub?gid=0&single=true&output=csv
  const SHEET_CSV_URL = "IDE_JON_A_CSV_LINKED";

  // 2) Ezek a te t√°bl√°d oszlopnevei (a screenshot alapj√°n)
  //    Ha n√°lad picit m√°s a fejl√©cek sz√∂vege, itt igaz√≠tjuk.
  const COLS = {
    name: "Respondent",        // vagy ha van "N√©v" oszlopod, akkor azt √≠rd be
    rating: "Mennyire v",      // a screenshoton "Mennyire v..." (√©rt√©kel√©s)
    text: "V√©lem√©nyed",        // sz√∂veg
    approved: "Megjelenhet?",  // igen/nem
    date: "Submitted at"       // d√°tum
  };

  // --- CSV parser (egyszer≈±, de kezeli az id√©z≈ëjeles mez≈ëket) ---
  function parseCSV(csvText){
    const rows = [];
    let row = [];
    let cur = "";
    let inQuotes = false;

    for (let i=0; i<csvText.length; i++){
      const ch = csvText[i];
      const next = csvText[i+1];

      if (ch === '"' ){
        if (inQuotes && next === '"'){ // escaped quote
          cur += '"';
          i++;
        } else {
          inQuotes = !inQuotes;
        }
      } else if (ch === ',' && !inQuotes){
        row.push(cur);
        cur = "";
      } else if ((ch === '\n' || ch === '\r') && !inQuotes){
        if (ch === '\r' && next === '\n') i++;
        row.push(cur);
        cur = "";
        // csak akkor push, ha nem teljesen √ºres sor
        if (row.some(v => (v ?? "").trim() !== "")) rows.push(row);
        row = [];
      } else {
        cur += ch;
      }
    }
    // last
    row.push(cur);
    if (row.some(v => (v ?? "").trim() !== "")) rows.push(row);

    return rows;
  }

  function normalizeHeader(h){
    return (h || "").trim().toLowerCase();
  }

  function findHeaderIndex(headers, wanted){
    const w = normalizeHeader(wanted);
    // direkt egyez√©s
    let idx = headers.findIndex(h => normalizeHeader(h) === w);
    if (idx !== -1) return idx;

    // "contains" fallback (pl. "Mennyire v..." miatt)
    idx = headers.findIndex(h => normalizeHeader(h).includes(w));
    if (idx !== -1) return idx;

    // ford√≠tva: wanted benne van headerben vagy header benne van wantedben
    idx = headers.findIndex(h => w.includes(normalizeHeader(h)));
    return idx;
  }

  function starsFromRating(val){
    const n = Math.max(0, Math.min(5, Number(val) || 0));
    const full = "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ".slice(0, n);
    const empty = "‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ".slice(0, 5-n);
    return full + empty;
  }

  function formatDate(iso){
    if (!iso) return "";
    const d = new Date(iso);
    if (Number.isNaN(d.getTime())) return String(iso);
    return d.toLocaleString("hu-HU", { year:"numeric", month:"2-digit", day:"2-digit", hour:"2-digit", minute:"2-digit" });
  }

  async function loadReviews(){
    const listEl = document.getElementById("reviewsList");
    const emptyEl = document.getElementById("reviewsEmpty");
    const summaryEl = document.getElementById("reviewsSummary");

    listEl.innerHTML = "";
    summaryEl.style.display = "none";

    if (!SHEET_CSV_URL || SHEET_CSV_URL.includes("IDE_JON_A_CSV_LINKED")){
      emptyEl.textContent = "Hi√°nyzik a Google Sheets CSV link. Illeszd be a k√≥dban a SHEET_CSV_URL hely√©re.";
      return;
    }

    emptyEl.textContent = "Bet√∂lt√©s‚Ä¶";

    try{
      // cache-buster, hogy friss√ºlj√∂n
      const url = SHEET_CSV_URL + (SHEET_CSV_URL.includes("?") ? "&" : "?") + "t=" + Date.now();
      const res = await fetch(url);
      if (!res.ok) throw new Error("HTTP " + res.status);
      const csv = await res.text();

      const table = parseCSV(csv);
      if (!table.length){
        emptyEl.textContent = "A CSV √ºres.";
        return;
      }

      const headers = table[0];
      const dataRows = table.slice(1);

      const idxName = findHeaderIndex(headers, COLS.name);
      const idxRating = findHeaderIndex(headers, COLS.rating);
      const idxText = findHeaderIndex(headers, COLS.text);
      const idxApproved = findHeaderIndex(headers, COLS.approved);
      const idxDate = findHeaderIndex(headers, COLS.date);

      // sz≈±r√©s: Megjelenhet? = igen
      const approved = dataRows
        .map(r => ({
          name: (idxName >= 0 ? r[idxName] : "") || "N√©vtelen",
          rating: (idxRating >= 0 ? r[idxRating] : "") || "",
          text: (idxText >= 0 ? r[idxText] : "") || "",
          approved: (idxApproved >= 0 ? r[idxApproved] : "") || "",
          date: (idxDate >= 0 ? r[idxDate] : "") || ""
        }))
        .filter(x => String(x.approved).trim().toLowerCase() === "igen")
        .filter(x => String(x.text).trim().length > 0);

      if (!approved.length){
        emptyEl.textContent = "M√©g nincs j√≥v√°hagyott v√©lem√©ny (Megjelenhet? = igen).";
        return;
      }

      // rendez√©s: leg√∫jabb el√∂l (ha van d√°tum)
      approved.sort((a,b) => {
        const da = new Date(a.date).getTime();
        const db = new Date(b.date).getTime();
        if (Number.isNaN(da) || Number.isNaN(db)) return 0;
        return db - da;
      });

      // √∂sszegz√©s (√°tlag)
      const ratings = approved.map(x => Number(x.rating) || 0).filter(n => n>0);
      if (ratings.length){
        const avg = ratings.reduce((s,n)=>s+n,0)/ratings.length;
        summaryEl.style.display = "block";
        summaryEl.textContent = `√Åtlag: ${avg.toFixed(1)} / 5  ‚Ä¢  J√≥v√°hagyott v√©lem√©nyek: ${approved.length}`;
      }

      // render
      approved.forEach(item => {
        const div = document.createElement("div");
        div.className = "review";
        div.innerHTML = `
          <div class="review-top">
            <div class="review-name">${escapeHtml(item.name)}</div>
            <div class="stars">${escapeHtml(starsFromRating(item.rating))}</div>
          </div>
          <p class="review-text">${escapeHtml(item.text)}</p>
          <div class="review-meta">${escapeHtml(formatDate(item.date))}</div>
        `;
        listEl.appendChild(div);
      });

      emptyEl.style.display = "none";
    }catch(err){
      emptyEl.style.display = "block";
      emptyEl.textContent = "Hiba a v√©lem√©nyek bet√∂lt√©sekor: " + (err?.message || String(err));
    }
  }

  function escapeHtml(str){
    return String(str ?? "")
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  document.getElementById("refreshBtn").addEventListener("click", loadReviews);

  // auto load
  loadReviews();
</script>

</body>
</html>
